{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///external \"babel-runtime/helpers/taggedTemplateLiteral\"","webpack:///external \"@emotion/styled\"","webpack:///external \"babel-runtime/regenerator\"","webpack:///external \"babel-runtime/helpers/asyncToGenerator\"","webpack:///external \"mongoose\"","webpack:///external \"react-router-dom\"","webpack:///external \"babel-runtime/core-js/json/stringify\"","webpack:///external \"passport\"","webpack:///external \"babel-runtime/core-js/get-iterator\"","webpack:///external \"babel-runtime/helpers/slicedToArray\"","webpack:///external \"express\"","webpack:///external \"prop-types\"","webpack:///external \"react-powerplug\"","webpack:///external \"email-validator\"","webpack:///external \"react-dom/server\"","webpack:///external \"body-parser\"","webpack:///external \"express-session\"","webpack:///external \"http\"","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///external \"node-cache\"","webpack:///external \"cookie-parser\"","webpack:///external \"connect-flash\"","webpack:///external \"compression\"","webpack:///external \"dotenv\"","webpack:///external \"babel-runtime/helpers/extends\"","webpack:///external \"passport-local\"","webpack:///external \"md5\"","webpack:///./src/index.js","webpack:///external \"connect-redis\"","webpack:///./src/server/cache.js","webpack:///./src/server/models.js","webpack:///./src/server/helpers.js","webpack:///./src/client/helpers/index.js","webpack:///./src/client/components/AppItem.js","webpack:///./src/client/components/AppList.js","webpack:///./src/client/DataContext.js","webpack:///./src/client/pages/Home.js","webpack:///./src/client/helpers/api.js","webpack:///./src/client/pages/app/Shortcut.js","webpack:///./src/client/pages/app/Pin.js","webpack:///./src/client/pages/app/ShortcutItem.js","webpack:///./src/client/pages/app/ShortcutList.js","webpack:///./src/client/pages/app/OSSelect.js","webpack:///./src/client/components/Button.js","webpack:///./src/client/pages/app/GetLinkPopup.js","webpack:///./src/client/pages/app/GetLink.js","webpack:///./src/client/pages/app/Controls.js","webpack:///./src/client/pages/App.js","webpack:///./src/client/components/Input.js","webpack:///./src/client/pages/login/LoginForm.js","webpack:///./src/client/pages/Login.js","webpack:///./src/client/pages/layout/Logo.js","webpack:///./src/client/pages/layout/Header.js","webpack:///./src/client/pages/layout/Footer.js","webpack:///./src/client/pages/signup/SignupForm.js","webpack:///./src/client/pages/Signup.js","webpack:///./src/client/pages/404.js","webpack:///./src/client/Layout.js","webpack:///./src/server/page.js","webpack:///./src/server/auth.js","webpack:///./src/server/db.js","webpack:///./src/server/api.js","webpack:///./src/server.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","__webpack_exports__","http__WEBPACK_IMPORTED_MODULE_0__","http__WEBPACK_IMPORTED_MODULE_0___default","app","default","http","createServer","listen","process","error","console","log","_ref","_ref2","User","mongoose","model","Schema","email","String","password","App","icon","sections","oss","shortcuts","action","sectionId","ObjectId","win","mac","isHtml","Boolean","note","AppCategory","apps","UserShortcut","userId","appId","nodeCache","NodeCache","getAppsHash","asyncToGenerator_default","regenerator_default","a","mark","_callee","appsHash","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","wrap","_context","prev","next","find","sent","undefined","get_iterator_default","done","push","id","_id","toString","toLowerCase","replace","RegExp","t0","return","finish","set","abrupt","stop","this","apply","arguments","getAppCategories","_callee2","appCategories","_context2","lean","_ref3","getApp","_callee3","cacheApp","userShortcuts","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","userShortcut","_loop","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","shortcut","_context3","findById","map","assign_default","pins","e","t1","_x","encodeAppName","upperFirstLetter","string","charAt","toUpperCase","slice","disabled","Container","DisabledContainer","EnabledContainer","external_react_default","createElement","Soon","Image","src","Name","sharedStyles","styled","div","_templateObject","_templateObject2","_templateObject3","color","amount","usePound","num","parseInt","b","g","lightenDarkenColor","_templateObject4","props","img","_templateObject5","AppList","gridArea","AppList_Container","Header","InnerContainer","className","encodedName","CurrItem","AppItem_App","href","AppList_templateObject","AppList_templateObject2","h2","AppList_templateObject3","DataContext","React","createContext","Home","useContext","Home_Container","Hero","GridContainer","appCategory","extends_default","Home_templateObject","Home_templateObject2","h1","Home_templateObject3","headers","Accept","Cache","Content-Type","signup","fetch","method","body","stringify_default","then","res","json","login","getLink","shortcutIds","credentials","split","keysArr","seperator","newArr","item1Split","length","trim","err","Shortcut","keys","Shortcut_Container","dangerouslySetInnerHTML","__html","prepareHtml","index","ShortcutOption","html","isEnding","includes","numpad","toRender","Spacer","Then","external_react_","Shortcut_templateObject","Shortcut_templateObject2","Shortcut_templateObject3","isPinned","onClick","Pin_Container","IconWrapper","alt","Count","Pin_templateObject","_ref4","span","Pin_templateObject2","Pin_templateObject3","_ref5","ShortcutItem","handlePin","newPins","newIsPinned","isPinnedState","setPinsState","setIsPinnedState","doPin","shortcutId","_useContext","_useState","useState","_useState2","slicedToArray_default","pinsState","_useState3","_useState4","infoVisible","setInfoVisible","_useState5","_useState6","PinContainer","Pin_Shortcut","ActionContainer","InfoIcon","InfoContainer","KeysContainer","ShortcutItem_templateObject","ShortcutItem_templateObject2","ShortcutItem_templateObject3","ShortcutItem_templateObject4","ShortcutItem_templateObject5","ShortcutList","title","os","ShortcutList_Container","Title","Table","cellSpacing","app_ShortcutItem","ShortcutList_templateObject","header","ShortcutList_templateObject2","ShortcutList_templateObject3","OSButton","buttonOS","selectedOS","supportedOSS","iconName","style","cursor","OSSelect","onSelect","x","setX","useEffect","OSSelect_Container","OSSelect_OSButton","OSSelect_templateObject","Button","children","secondary","SecondaryButton","PrimaryButton","button","Button_templateObject","Button_templateObject2","GetLinkPopup","forwardRef","ref","GetLinkPopup_Container","InputWrapper","Input","type","link","onFocus","event","target","select","readOnly","Seperator","GetLinkPopup_templateObject","input","GetLinkPopup_templateObject2","GetLinkPopup_templateObject3","hr","GetLinkPopup_templateObject4","GetLink","onGetLink","onClose","popupElm","useRef","handleClickAway","current","contains","document","addEventListener","removeEventListener","app_GetLinkPopup","Controls","handleGetLink","filter","data","text","setPublicLink","dummy","appendChild","setAttribute","execCommand","removeChild","doSetOs","publicLink","Controls_Container","NameWrapper","Icon","Controls_Name","SearchWrapper","app_OSSelect","Controls_Seperator","app_GetLink","Controls_templateObject","Controls_templateObject2","Controls_templateObject3","Controls_templateObject4","Controls_templateObject5","_templateObject6","app_Controls","ResultsContainer","section","App_templateObject","Input_templateObject","Login","onSubmit","handleSubmit","values","setValues","preventDefault","emailValid","EmailValidator","passwordValid","external_react_powerplug_","initial","field","FormContainer","LoginForm_Header","Label","components_Input","Error","LabelWrapper","marginTop","SignupWrapper","external_react_router_dom_","to","form","LoginForm_templateObject","LoginForm_templateObject2","LoginForm_templateObject3","LoginForm_templateObject4","label","LoginForm_templateObject5","LoginForm_templateObject6","userJson","doLogin","_x2","Login_Container","LoginForm_Login","Login_templateObject","Logo","H1","fontWeight","Dot","Alpha","small","Logo_templateObject","Logo_templateObject2","Logo_templateObject3","Header_Container","Header_templateObject","Footer","Footer_Container","footer","Footer_templateObject","Signup","mockEmail","Math","floor","random","SignupForm_FormContainer","SignupForm_Header","SignupForm_Label","SignupForm_Error","SignupForm_LabelWrapper","SignupForm_SignupWrapper","SignupForm_templateObject","SignupForm_templateObject2","SignupForm_templateObject3","SignupForm_templateObject4","SignupForm_templateObject5","SignupForm_templateObject6","Signup_Container","SignupForm_Signup","Signup_templateObject","Page404","_404_Container","_404_Header","Code","Message","_404_templateObject","_404_templateObject2","_404_templateObject3","_404_templateObject4","Layout_templateObject","Layout","Layout_Container","layout_Header","exact","path","component","passport","use","LocalStrategy","usernameField","passwordField","username","user","findOne","message","_x3","serializeUser","deserializeUser","connect","env","ATLAS_PASSWORD","useNewUrlParser","update","$addToSet","$pull","findOneAndUpdate","upsert","signupUser","save","_x5","_x6","router","express","Router","post","req","_req$body","db","authenticate","info","status","send","logout","_req$body2","appName","hash","cache","APP_URL","md5","sessionID","join","substring","Types","_x4","dataContext","sendPage","RedisStore","session","dotenv","config","assets","disable","store","secret","SESSION_SECRET","resave","saveUninitialized","cookie","maxAge","secure","compression","bodyParser","urlencoded","extended","cookieParser","initialize","flash","api","static","defaultHandler","foundApp","_app","params","redirect","cookies","query","h","JSON","parse","t2","stack","getTemplate","url","client_DataContext","Provider","context","location","client_Layout","head","cacheKey","originalUrl","write","client","css","js","stream","renderToNodeStream","pipe","end","on","cachePage","markup","page","renderToString"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 28);\n","module.exports = require(\"react\");","module.exports = require(\"babel-runtime/helpers/taggedTemplateLiteral\");","module.exports = require(\"@emotion/styled\");","module.exports = require(\"babel-runtime/regenerator\");","module.exports = require(\"babel-runtime/helpers/asyncToGenerator\");","module.exports = require(\"mongoose\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"babel-runtime/core-js/json/stringify\");","module.exports = require(\"passport\");","module.exports = require(\"babel-runtime/core-js/get-iterator\");","module.exports = require(\"babel-runtime/helpers/slicedToArray\");","module.exports = require(\"express\");","module.exports = require(\"prop-types\");","module.exports = require(\"react-powerplug\");","module.exports = require(\"email-validator\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"body-parser\");","module.exports = require(\"express-session\");","module.exports = require(\"http\");","module.exports = require(\"babel-runtime/core-js/object/assign\");","module.exports = require(\"node-cache\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"connect-flash\");","module.exports = require(\"compression\");","module.exports = require(\"dotenv\");","module.exports = require(\"babel-runtime/helpers/extends\");","module.exports = require(\"passport-local\");","module.exports = require(\"md5\");","import http from \"http\"\r\n\r\nlet app = require(\"./server\").default\r\n\r\nconst server = http.createServer(app)\r\n\r\nlet currentApp = app\r\n\r\n// console.log(process.env ? process.env[\"PORT\"] : \"no process env1\")\r\n// console.log(\r\n//   function(x) {\r\n//     return x ? x[\"PORT\"] : \"no process env2\"\r\n//   }.apply(null, process.env)\r\n// )\r\n// console.log(JSON.stringify(process.env))\r\n\r\nserver.listen(process.env.PORT || 3000, error => {\r\n  // console.log(process.env.PORT)\r\n  if (error) {\r\n    console.log(error)\r\n  }\r\n\r\n  console.log(\"server started\")\r\n})\r\n\r\nif (module.hot) {\r\n  console.log(\"âœ…  Server-side HMR Enabled!\")\r\n\r\n  module.hot.accept(\"./server\", () => {\r\n    console.log(\"ðŸ”  HMR Reloading `./server`...\")\r\n\r\n    try {\r\n      app = require(\"./server\").default\r\n      server.removeListener(\"request\", currentApp)\r\n      server.on(\"request\", app)\r\n      currentApp = app\r\n    } catch (error) {\r\n      console.error(error)\r\n    }\r\n  })\r\n}\r\n ","module.exports = require(\"connect-redis\");","import NodeCache from \"node-cache\"\r\n\r\nimport { encodeAppName } from \"./helpers\"\r\n\r\nimport { App, AppCategory, UserShortcut } from \"./models\"\r\n\r\nconst nodeCache = new NodeCache()\r\n\r\nexport async function getAppsHash() {\r\n  let appsHash = nodeCache.get(\"appsHash\")\r\n  if (!appsHash) {\r\n    appsHash = []\r\n    const apps = await App.find()\r\n    for (const app of apps) {\r\n      appsHash.push({ id: app._id.toString(), name: encodeAppName(app.name) })\r\n    }\r\n    nodeCache.set(\"appsHash\", appsHash)\r\n  }\r\n  return appsHash\r\n}\r\n\r\nexport async function getAppCategories() {\r\n  let appCategories = nodeCache.get(\"appCategories\")\r\n  if (!appCategories) {\r\n    appCategories = await AppCategory.find().lean()\r\n    nodeCache.set(\"appHash\", appCategories)\r\n  }\r\n  return appCategories\r\n}\r\n\r\nexport function setPin(appId, shortcutId, isPinned) {\r\n  const app = nodeCache.get(\"app-\" + appId)\r\n\r\n  const change = isPinned ? 1 : -1\r\n  app.shortcuts.find(\r\n    e => e._id.toString() === shortcutId.toString()\r\n  ).pins += change\r\n\r\n  nodeCache.set(\"app-\" + appId, app)\r\n}\r\n\r\nexport async function getApp(appId) {\r\n  let cacheApp = nodeCache.get(\"app-\" + appId)\r\n\r\n  if (!cacheApp) {\r\n    cacheApp = await App.findById(appId).lean()\r\n    cacheApp.shortcuts = cacheApp.shortcuts.map(shortcut => ({\r\n      ...shortcut,\r\n      pins: 0,\r\n    }))\r\n\r\n    const userShortcuts = await UserShortcut.find({ appId: appId }).lean()\r\n\r\n    // calculate pins field\r\n    // go over every appid, userId record\r\n    for (const userShortcut of userShortcuts) {\r\n      // go over every shortcut in that record\r\n      for (const shortcut of userShortcut.shortcuts) {\r\n        const app = cacheApp.shortcuts.find(\r\n          e => e._id.toString() === shortcut.toString()\r\n        )\r\n        app.pins++\r\n      }\r\n    }\r\n  }\r\n\r\n  return cacheApp\r\n}\r\n\r\nexport function set(key, value) {\r\n  nodeCache.set(key, value)\r\n}\r\n\r\nexport function get(key) {\r\n  return nodeCache.get(key)\r\n}\r\n// export default nodeCache\r\n// START PERFORMANCE MEASURE\r\n// const hrstart = process.hrtime()\r\n\r\n// END PERFORMANCE MEASURE\r\n// const hrend = process.hrtime(hrstart)\r\n// console.log(`${hrend[0]}s ${hrend[1] / 1000000}ms`)\r\n","import mongoose, { Schema } from \"mongoose\"\r\n\r\nexport const User = mongoose.model(\r\n  \"users\",\r\n  new Schema({\r\n    email: String,\r\n    password: String,\r\n  })\r\n)\r\n// mongoose.set(\"debug\", function(coll, method, query, doc) {\r\n//   console.log(1231231)\r\n//   console.log(coll, method, query, doc)\r\n// })\r\n\r\n// getAppUrlName, shortcut.getPins, getIdByUrlName\r\nexport const App = mongoose.model(\r\n  \"apps\",\r\n  new Schema({\r\n    name: String,\r\n    icon: String,\r\n    sections: [\r\n      new Schema({\r\n        name: String,\r\n      }),\r\n    ],\r\n    oss: [String],\r\n    shortcuts: [\r\n      new Schema({\r\n        action: String,\r\n        sectionId: Schema.ObjectId,\r\n        win: String,\r\n        mac: String,\r\n        isHtml: Boolean,\r\n        note: String,\r\n      }),\r\n    ],\r\n  })\r\n)\r\n\r\nexport const AppCategory = mongoose.model(\r\n  \"app_categories\",\r\n  new Schema({\r\n    name: String,\r\n    icon: String,\r\n    apps: [new Schema({ name: String, icon: String })],\r\n  })\r\n)\r\n\r\nexport const UserShortcut = mongoose.model(\r\n  \"user_shortcuts\",\r\n  new Schema({\r\n    userId: Schema.ObjectId,\r\n    appId: Schema.ObjectId,\r\n    shortcuts: [Schema.ObjectId],\r\n  })\r\n)\r\n","export function encodeAppName(name) {\r\n  return name.toLowerCase().replace(new RegExp(\" \", \"g\"), \"-\")\r\n}","export function encodeAppName(name) {\r\n  return name.toLowerCase().replace(new RegExp(\" \", \"g\"), \"-\")\r\n}\r\n\r\nexport function upperFirstLetter(string) {\r\n  return string.charAt(0).toUpperCase() + string.slice(1)\r\n}\r\n\r\nexport function copyToClipboard(text) {\r\n  const dummy = document.createElement(\"input\")\r\n  document.body.appendChild(dummy)\r\n  dummy.setAttribute(\"value\", text)\r\n  dummy.select()\r\n  document.execCommand(\"copy\")\r\n  document.body.removeChild(dummy)\r\n}\r\n\r\nexport function lightenDarkenColor(color, amount) {\r\n  let usePound = false\r\n\r\n  if (color[0] === \"#\") {\r\n    color = color.slice(1)\r\n    usePound = true\r\n  }\r\n\r\n  let num = parseInt(color, 16)\r\n\r\n  let r = (num >> 16) + amount\r\n\r\n  if (r > 255) r = 255\r\n  else if (r < 0) r = 0\r\n\r\n  let b = ((num >> 8) & 0x00ff) + amount\r\n\r\n  if (b > 255) b = 255\r\n  else if (b < 0) b = 0\r\n\r\n  let g = (num & 0x0000ff) + amount\r\n\r\n  if (g > 255) g = 255\r\n  else if (g < 0) g = 0\r\n\r\n  return (usePound ? \"#\" : \"\") + (g | (b << 8) | (r << 16)).toString(16)\r\n}\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\n\r\nimport styled from \"@emotion/styled\"\r\nimport { lightenDarkenColor } from \"../helpers\"\r\n\r\nexport default function App({ name, icon, disabled }) {\r\n  const Container = disabled ? DisabledContainer : EnabledContainer\r\n  return (\r\n    <Container>\r\n      {disabled && <Soon>Soon</Soon>}\r\n      <Image src={icon} disabled={disabled} />\r\n      <Name disabled={disabled}>{name}</Name>\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst sharedStyles = `\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: var(--appItemSize);  \r\n  padding: 10px;\r\n  \r\n  background-color: #403434;\r\n  color: #d1b4b4;\r\n  transition: all 0.5s;\r\n\r\n  @media (min-width: 992px) {\r\n    width: var(--appItemSize);\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n      font-size:12px;        \r\n  }\r\n\r\n`\r\n\r\nconst DisabledContainer = styled.div`\r\n  ${sharedStyles}\r\n  position: relative;\r\n  overflow: hidden;\r\n`\r\n\r\nconst Soon = styled.div`\r\n  background: #d1403d;\r\n  color: #cccad2;\r\n  position: absolute;\r\n  top: 10px;\r\n  left: -20px;\r\n  transform: rotate(-45deg);\r\n  font-size: 13px;\r\n  width: 80px;\r\n  text-align: center;\r\n  z-index: 1;\r\n`\r\n\r\nconst EnabledContainer = styled.div`\r\n  ${sharedStyles}\r\n  cursor: pointer;\r\n\r\n  :hover {\r\n    color: #e9e5e5;\r\n    background: ${lightenDarkenColor(\"#4F4242\", 10)};\r\n    transform: scale(1.04);\r\n  }\r\n`\r\n\r\nconst Name = styled.div`\r\n  text-align: center;\r\n  font-size: 14px;\r\n  opacity: ${[props => (props.disabled ? 0.3 : 1)]};\r\n`\r\nconst Image = styled.img`\r\n  width: 60%;\r\n  margin-bottom: 5px;\r\n  opacity: ${[props => (props.disabled ? 0.3 : 1)]};\r\n`\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\nimport styled from \"@emotion/styled\"\r\n\r\nimport { encodeAppName } from \"../helpers\"\r\nimport AppItem from \"./AppItem\"\r\n\r\nexport default function AppList({ name, apps, gridArea }) {\r\n  return (\r\n    <Container gridArea={gridArea}>\r\n      <Header>{name}</Header>\r\n      <InnerContainer className={gridArea}>\r\n        {apps.map(app => {\r\n          const encodedName = encodeAppName(app.name)\r\n          const CurrItem = () => (\r\n            <AppItem\r\n              icon={\"/logos/\" + encodedName + \".png\"}\r\n              name={app.name}\r\n              disabled={app.disabled}\r\n            />\r\n          )\r\n\r\n          return app.disabled ? (\r\n            <CurrItem key={app._id} />\r\n          ) : (\r\n            <a href={\"/\" + encodedName} key={app._id}>\r\n              <CurrItem />\r\n            </a>\r\n          )\r\n        })}\r\n      </InnerContainer>\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  background: #2c2525;\r\n  grid-area: ${props => props.gridArea};\r\n  padding: 20px;\r\n\r\n  @media (max-width: 992px) {\r\n    padding: 15px 10px;\r\n  }\r\n\r\n  @media (max-width: 767px) {\r\n    padding: 10px 6px;\r\n  }\r\n`\r\n\r\nconst InnerContainer = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(7, 1fr);\r\n  grid-gap: 10px;\r\n  --appItemSize: 132px;\r\n\r\n  @media (max-width: 1124px) {\r\n    --appItemSize: 122px;\r\n  }\r\n\r\n  @media (max-width: 1024px) {\r\n    grid-template-columns: repeat(6, 1fr);\r\n    --appItemSize: 136px;\r\n  }\r\n\r\n  @media (max-width: 992px) {\r\n    --appItemSize: 145px;\r\n  }\r\n\r\n  @media (max-width: 880px) {\r\n    grid-template-columns: repeat(5, 1fr);\r\n    --appItemSize: 150px;\r\n  }\r\n\r\n  @media (max-width: 768px) {    \r\n    --appItemSize: 137px;\r\n  }\r\n\r\n  @media (max-width: 650px) {\r\n    --appItemSize: 120px;\r\n  }\r\n\r\n  @media (max-width: 550px) {\r\n    grid-template-columns: repeat(4, 1fr);\r\n    --appItemSize: 110px;\r\n  }\r\n\r\n\r\n  @media (max-width: 414px) {\r\n    grid-template-columns: repeat(3, 1fr);\r\n    --appItemSize: 119px;\r\n  }\r\n\r\n  @media (max-width: 375px) {\r\n    --appItemSize: 106px;\r\n  }\r\n`\r\n\r\nconst Header = styled.h2`\r\n  color: #e9e5e5;\r\n  font-weight: 400;\r\n  font-size: 16px;\r\n  margin-bottom: 15px;\r\n  margin-left: 5px;\r\n`\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\n\r\nconst DataContext = React.createContext()\r\nexport default DataContext\r\n","import React, { Fragment, useContext } from \"react\" // eslint-disable-line no-unused-vars\r\nimport styled from \"@emotion/styled\"\r\n\r\nimport AppList from \"../components/AppList\"\r\nimport DataContext from \"../DataContext\"\r\n\r\nconst Home = () => {\r\n  const { appCategories } = useContext(DataContext)\r\n\r\n  return (\r\n    <Container>\r\n      <Hero>\r\n        Every app, every shortcut, <b>the best ones first.</b>\r\n      </Hero>\r\n      <GridContainer>\r\n        {appCategories.map(appCategory => (\r\n          <AppList key={appCategory.gridArea} {...appCategory} />\r\n        ))}\r\n      </GridContainer>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Home\r\n\r\nconst Container = styled.div`\r\n  max-width: 1024px;\r\n  margin: 0 auto;\r\n`\r\n\r\nconst GridContainer = styled.div`\r\n  display: grid;\r\n  grid-gap: 60px;\r\n  grid-template-areas:\r\n    \"os browsers browsers\"\r\n    \"coding coding coding\"\r\n    \"casual casual casual\"\r\n    \"graphics graphics graphics\"\r\n    \"office office office\";\r\n\r\n  @media (max-width: 992px) {\r\n    grid-template-areas:\r\n      \"os\"\r\n      \"browsers\"\r\n      \"coding\"\r\n      \"casual\"\r\n      \"graphics\"\r\n      \"office\";\r\n  }\r\n`\r\n\r\nconst Hero = styled.h1`\r\n  color: #ffffff;\r\n  font-size: 50px;\r\n  margin-top: 150px;\r\n  margin-bottom: 190px;\r\n  text-align: center;\r\n  font-weight: 300;\r\n  line-height: 1.5em;\r\n\r\n  & b {\r\n    font-weight: 500;\r\n  }\r\n\r\n  @media (max-width: 992px) {\r\n    margin-top: 75px;\r\n    margin-bottom: 110px;\r\n    font-size: 40px;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    margin-top: 50px;\r\n    margin-bottom: 70px;\r\n    font-size: 30px;\r\n  }\r\n`\r\n","const headers = {\r\n  // credentials: \"include\",\r\n  Accept: \"application/json\",\r\n  Cache: \"no-cache\",\r\n  \"Content-Type\": \"application/json\",\r\n}\r\n\r\nexport function signup(email, password) {\r\n  return fetch(\"/api/signup\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({\r\n      email,\r\n      password,\r\n    }),\r\n    headers,\r\n  }).then(res => res.json())\r\n}\r\n\r\nexport function login(email, password) {\r\n  return fetch(\"/api/login\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({\r\n      email,\r\n      password,\r\n    }),\r\n    headers,\r\n  }).then(res => res.json())\r\n}\r\n\r\nexport function getOS(appId, os) {\r\n  return fetch(`/api/apps/${appId}?os=${os}`).then(res => res.json())\r\n}\r\n\r\nexport function logout() {\r\n  return fetch(\"/api/logout\", {\r\n    method: \"POST\",\r\n    headers,\r\n  })\r\n}\r\n\r\nexport function pin(appId, shortcutId, isPinned) {\r\n  return fetch(\"/api/pin\", {\r\n    method: \"PATCH\",\r\n    body: JSON.stringify({ appId, shortcutId, isPinned }),\r\n    headers,\r\n  })\r\n}\r\n\r\nexport function getLink(appId, shortcutIds) {\r\n  return fetch(\"/api/getlink\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({ appId, shortcutIds }),\r\n    headers,\r\n    credentials: \"include\",\r\n  })\r\n}\r\n","import React, { Fragment } from \"react\" // eslint-disable-line no-unused-vars\r\nimport PropTypes from \"prop-types\"\r\nimport styled from \"@emotion/styled\"\r\n\r\nimport { upperFirstLetter } from \"../../helpers\"\r\n\r\nfunction split(keysArr, seperator) {\r\n  const newArr = []\r\n  for (const item1 of keysArr) {\r\n    const item1Split = item1.split(seperator)\r\n    for (let i = 0; i < item1Split.length; i++) {\r\n      newArr.push(item1Split[i].trim())\r\n\r\n      // dont add seperator after last element\r\n      if (i !== item1Split.length - 1) {\r\n        newArr.push(seperator)\r\n      }\r\n    }\r\n  }\r\n\r\n  return newArr\r\n}\r\n\r\nexport default function Shortcut({ keys, isHtml }) {\r\n  if (isHtml)\r\n    return (\r\n      <Container\r\n        dangerouslySetInnerHTML={{ __html: prepareHtml(keys) }}\r\n        isHtml={isHtml}\r\n      />\r\n    )\r\n\r\n  let keysArr = split([keys], \" or \")\r\n\r\n  return keysArr.map((e, index) => (\r\n    <div key={index}>\r\n      <ShortcutOption keys={e} />{\" \"}\r\n    </div>\r\n  ))\r\n}\r\n\r\nfunction prepareHtml(html) {\r\n  let isEnding = false\r\n\r\n  while (html.includes(\"**\")) {\r\n    html = html.replace(\"**\", isEnding ? \"</kbd>\" : \"<kbd>\")\r\n    isEnding = !isEnding\r\n  }\r\n\r\n  return upperFirstLetter(html)\r\n}\r\n\r\nfunction ShortcutOption({ keys }) {\r\n  let keysArr = split([keys], \"+\")\r\n  keysArr = split(keysArr, \"|\")\r\n  keysArr = split(keysArr, \"..\")\r\n  keysArr = split(keysArr, \" \")\r\n\r\n  return (\r\n    <Container>\r\n      {keysArr.map((key, index) => {\r\n        let numpad\r\n        if (key.includes(\"numpad\")) {\r\n          key = key.replace(\"numpad\", \"\")\r\n          numpad = \" Numpad \"\r\n        }\r\n        let toRender\r\n\r\n        key = key.toLowerCase()\r\n\r\n        switch (key) {\r\n          case \"arrows\":\r\n          case \"+\":\r\n          case \"..\":\r\n            return <Spacer key={index}>{key}</Spacer>\r\n          case \" \":\r\n            return <Then key={index}>then</Then>\r\n          case \"or\":\r\n            return (\r\n              <div key={index} className=\"kbn-or\">\r\n                or\r\n              </div>\r\n            )\r\n          case \"plus\":\r\n            toRender = <kbd key={index}>+</kbd>\r\n            break\r\n          case \"|\":\r\n            return <Spacer key={index}>/</Spacer>\r\n          case \"up\":\r\n          case \"down\":\r\n          case \"left\":\r\n          case \"right\":\r\n            toRender = (\r\n              <kbd key={index}>\r\n                <i className={`fas fa-long-arrow-alt-${key}`} />\r\n              </kbd>\r\n            )\r\n            break\r\n          default:\r\n            toRender = <kbd key={index}>{upperFirstLetter(key)}</kbd>\r\n            break\r\n        }\r\n        return (\r\n          <Fragment key={index}>\r\n            {numpad && <Spacer>numpad</Spacer>}\r\n            {toRender}\r\n          </Fragment>\r\n        )\r\n      })}\r\n    </Container>\r\n  )\r\n}\r\n\r\nShortcut.propTypes = {\r\n  keys: PropTypes.string.isRequired,\r\n}\r\n\r\nconst Spacer = styled.div`\r\n  margin: 0 3px;\r\n`\r\n\r\nconst Then = styled.div`\r\n  font-style: italic;\r\n  margin: 0 3px;\r\n`\r\n\r\nconst Container = styled.div`\r\n  display: ${props => (props.isHtml ? \"block\" : \"inline-flex\")};\r\n  flex-wrap: wrap;\r\n  font-size: 14px;\r\n  color: #e9e5e5;\r\n\r\n  kbd {\r\n    font-size: 14px;\r\n  }\r\n\r\n  .kbn-or {\r\n    padding: 1px 10px;\r\n  }\r\n`\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\nimport PropTypes from \"prop-types\"\r\nimport styled from \"@emotion/styled\"\r\n\r\nexport default function Shortcut({ pins, isPinned, onClick }) {\r\n  return (\r\n    <Container isPinned={isPinned} onClick={onClick}>\r\n      <IconWrapper>\r\n        {isPinned ? (\r\n          <img src=\"/pin-on.svg\" alt=\"\" />\r\n        ) : (\r\n          <img src=\"/pin-off.svg\" alt=\"\" />\r\n        )}\r\n      </IconWrapper>\r\n      <Count isPinned={isPinned}>{pins}</Count>\r\n    </Container>\r\n  )\r\n}\r\n\r\nShortcut.propTypes = {\r\n  pins: PropTypes.number.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n  isPinned: PropTypes.bool.isRequired,\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: inline-flex;\r\n  width: 100%;\r\n  align-items: flex-start;\r\n  border: solid 1px ${({ isPinned }) => (isPinned ? \"#b3995b\" : \"#9D8B8B\")};\r\n  border-radius: 3px;\r\n  padding: 5px 0 3px;\r\n  cursor: pointer;\r\n  vertical-align: middle;\r\n  user-select: none;\r\n\r\n  img {\r\n    height: 12px;\r\n  }\r\n\r\n  :hover {\r\n    border-color: ${({ isPinned }) => (isPinned ? \"#ffdb87\" : \"#e9e5e5\")};\r\n    span {\r\n      color: ${({ isPinned }) => (isPinned ? \"#ffdb87\" : \"#FFFFFF\")};\r\n    }\r\n  }\r\n`\r\n\r\nconst IconWrapper = styled.span`\r\n  line-height: 11px;\r\n  margin-left: 7px;\r\n`\r\n\r\nconst Count = styled.span`\r\n  font-size: 11px;\r\n  color: ${({ isPinned }) => (isPinned ? \"#FFD46F\" : \"#E9E5E5\")};\r\n  margin: 0 auto;\r\n  padding: 0 6px;\r\n  line-height: 10px;\r\n`\r\n","import React, { Fragment, useContext, useState } from \"react\" // eslint-disable-line no-unused-vars\r\nimport styled from \"@emotion/styled\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nimport DataContext from \"../../DataContext\"\r\nimport { pin } from \"../../helpers/api\"\r\nimport { upperFirstLetter } from \"../../helpers\"\r\nimport Shortcut from \"./Shortcut\"\r\nimport Pin from \"./Pin\"\r\n\r\nfunction ShortcutItem({ id, action, keys, pins, isPinned, isHtml, note }) {\r\n  const { app, doPin } = useContext(DataContext)\r\n  const [pinsState, setPinsState] = useState(pins)\r\n  const [infoVisible, setInfoVisible] = useState(false)\r\n  const [isPinnedState, setIsPinnedState] = useState(isPinned)\r\n\r\n  async function handlePin() {\r\n    const newPins = isPinnedState ? pins : pins + 1\r\n    const newIsPinned = !isPinnedState\r\n    setPinsState(newPins)\r\n    setIsPinnedState(newIsPinned)\r\n\r\n    doPin(id, newPins, newIsPinned)\r\n    await pin(app._id, id, newIsPinned)\r\n\r\n    // if (user) {\r\n    // } else {\r\n    // }\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <PinContainer>\r\n        <Pin isPinned={isPinnedState} pins={pinsState} onClick={handlePin} />\r\n      </PinContainer>\r\n      <ActionContainer isPinned={isPinnedState}>\r\n        {upperFirstLetter(action)}\r\n        {note && (\r\n          <InfoIcon\r\n            className=\"fas fa-info\"\r\n            onClick={() => setInfoVisible(!infoVisible)}\r\n          />\r\n        )}\r\n        {infoVisible && <InfoContainer>{note}</InfoContainer>}\r\n      </ActionContainer>\r\n      <KeysContainer>\r\n        <Shortcut keys={keys} isHtml={isHtml} />\r\n      </KeysContainer>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nShortcutItem.propTypes = {\r\n  action: PropTypes.string.isRequired,\r\n  keys: PropTypes.string.isRequired,\r\n}\r\n\r\nexport default ShortcutItem\r\n\r\nconst InfoIcon = styled.i`\r\n  font-size: 13px;\r\n  color: #a4a3a6;\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n`\r\n\r\nconst InfoContainer = styled.div`\r\n  font-size: 13px;\r\n  color: #a4a3a6;\r\n  margin-top: 3px;\r\n`\r\n\r\nconst ActionContainer = styled.div`\r\n  color: ${props => (props.isPinned ? \"#FFD46F\" : \"inherit\")};\r\n  user-select: none;  \r\n  padding-right:20px;\r\n`\r\n\r\nconst PinContainer = styled.div`\r\n  // width: 1%;\r\n  text-align: center;\r\n  padding: 0 13px 0 15px;\r\n  user-select: none;\r\n`\r\n\r\nconst KeysContainer = styled.div`\r\n  padding: 0 13px 0 0;\r\n`\r\n","import React, { useContext } from \"react\" // eslint-disable-line no-unused-vars\r\n\r\nimport ShortcutItem from \"./ShortcutItem\"\r\nimport styled from \"@emotion/styled\"\r\nimport DataContext from \"../../DataContext\"\r\n\r\nimport { upperFirstLetter } from \"../../helpers\"\r\n\r\nexport default function ShortcutList({ title, shortcuts }) {\r\n  const { os } = useContext(DataContext)\r\n\r\n  return (\r\n    <Container>\r\n      <Title>{upperFirstLetter(title)}</Title>\r\n      <Table cellSpacing={0}>\r\n        {shortcuts.map(shortcut => {\r\n          return (\r\n            <ShortcutItem\r\n              key={shortcut._id}\r\n              id={shortcut._id}\r\n              keys={shortcut[os]}\r\n              action={shortcut.action}\r\n              note={shortcut.note}\r\n              pins={shortcut.pins}\r\n              isHtml={shortcut.isHtml}\r\n              isPinned={!!shortcut.isPinned}\r\n            />\r\n          )\r\n        })}\r\n      </Table>\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: inline-block;\r\n  margin-bottom: 40px;\r\n  font-size: 14px;\r\n  border-radius: 5px;\r\n  overflow: hidden;\r\n  width: 100%;\r\n`\r\n\r\nconst Title = styled.header`\r\n  color: #e9e5e5;\r\n  background: #a12d2a;\r\n  padding: 5px 10px 7px 15px;\r\n`\r\n\r\nconst Table = styled.div`\r\n  display: grid;\r\n  grid-gap: 8px 0;\r\n  grid-template-columns: 80px 1fr 1fr;\r\n  padding: 8px 0;\r\n  box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);\r\n  background: #2e2424;\r\n  font-weight: 300;\r\n\r\n  > div {\r\n    border-bottom: solid 1px #453a3a;\r\n    padding-bottom:8px;\r\n  }\r\n`","import React, { useState, useEffect } from \"react\" // eslint-disable-line no-unused-vars\r\nimport styled from \"@emotion/styled\"\r\n\r\nfunction OSSelect({ oss, os, onSelect }) {\r\n  const [x, setX] = useState(1)\r\n\r\n  useEffect(() => setX(9))\r\n\r\n  return (\r\n    <Container>\r\n      <button style={{ cursor: \"pointer\" }} onClick={() => setX(x + 1)}>\r\n        {x}\r\n      </button>\r\n      <OSButton\r\n        buttonOS=\"win\"\r\n        selectedOS={os}\r\n        supportedOSS={oss}\r\n        onClick={onSelect}\r\n      />\r\n      <OSButton\r\n        buttonOS=\"mac\"\r\n        selectedOS={os}\r\n        supportedOSS={oss}\r\n        onClick={onSelect}\r\n      />\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst OSButton = ({ buttonOS, selectedOS, supportedOSS, onClick }) => {\r\n  const SELECTED_COLOR = \"#E9E5E5\"\r\n  const UNSELECTED_COLOR = \"#5A5A5A\"\r\n  const iconName = buttonOS === \"mac\" ? \"apple\" : \"windows\"\r\n\r\n  return (\r\n    supportedOSS.includes(buttonOS) && (\r\n      <i\r\n        className={\"fab fa-\" + iconName}\r\n        style={{\r\n          color: selectedOS === buttonOS ? SELECTED_COLOR : UNSELECTED_COLOR,\r\n          cursor: selectedOS === buttonOS ? \"default\" : \"pointer\",\r\n        }}\r\n        onClick={() =>\r\n          selectedOS === buttonOS ? undefined : onClick(buttonOS)\r\n        }\r\n      />\r\n    )\r\n  )\r\n}\r\nexport default OSSelect\r\n\r\nconst Container = styled.span`\r\n  font-size: 30px;\r\n  i + i {\r\n    margin-left: 20px;\r\n  }\r\n`\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\nimport PropTypes from \"prop-types\"\r\n\r\nimport styled from \"@emotion/styled\"\r\n\r\nexport default function Button({ children, secondary, style, onClick }) {\r\n  return secondary ? (\r\n    <SecondaryButton style={style} onClick={onClick}>\r\n      {children}\r\n    </SecondaryButton>\r\n  ) : (\r\n    <PrimaryButton style={style} onClick={onClick}>\r\n      {children}\r\n    </PrimaryButton>\r\n  )\r\n}\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n}\r\n\r\nconst style = `\r\n  display: inline-block;\r\n  cursor:pointer;\r\n  color: #E9E5E5;\r\n  padding: 8px 15px;\r\n  border-radius: 4px;\r\n  line-height: 100%;\r\n`\r\n\r\nconst PrimaryButton = styled.button`\r\n  ${style}\r\n\r\n  background-color: #D1403D;\r\n  color: #FFFFFF;\r\n  border: 1px solid #d1403d;\r\n\r\n  &:hover {\r\n    background-color: #e86562;\r\n  }\r\n`\r\n\r\nconst SecondaryButton = styled.button`\r\n  ${style}\r\n  background:transparent;\r\n  color: #A4A3A6;\r\n  border: 1px solid #A4A3A6;\r\n\r\n  &:hover {\r\n    background: #9d8b8b;\r\n  }\r\n`\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\nimport styled from \"@emotion/styled\"\r\n\r\nconst GetLinkPopup = React.forwardRef((props, ref) => {\r\n  return (\r\n    <Container ref={ref}>\r\n      <b>Done. </b>You can now share this link with friends or save it for future reference.\r\n      <InputWrapper>\r\n        <Input\r\n          type=\"text\"\r\n          value={props.link}\r\n          onFocus={event => event.target.select()}\r\n          readOnly\r\n        />\r\n        <br />\r\n        <small>Link copied to clipboard</small>\r\n      </InputWrapper>\r\n      <Seperator />\r\n      <a>Login</a> to edit it in the future and more.\r\n    </Container>\r\n  )\r\n})\r\n\r\nexport default GetLinkPopup\r\n\r\nconst Container = styled.div`\r\n  background: #2e2424;\r\n  max-width: 300px;\r\n  padding: 20px;\r\n  position: relative;\r\n  border-radius: 5px;\r\n  box-shadow: 0px 7px 23px 10px rgba(0, 0, 0, 0.4);\r\n\r\n  position: absolute;\r\n  right: 0;\r\n  top: 64px;\r\n\r\n  :after {\r\n    left: 80%;\r\n    margin-left: -4px;\r\n    top: -10px;\r\n    border-bottom: 10px solid #2e2424;\r\n    display: block;\r\n    position: absolute;\r\n    right: 20px;\r\n    vertical-align: middle;\r\n    content: \"\";\r\n    border-left: 8px solid transparent;\r\n    border-right: 8px solid transparent;\r\n    border-style: none double solid;\r\n    width: 0;\r\n    height: 0;\r\n  }\r\n  small {\r\n    color: #9d8b8b;\r\n  }\r\n`\r\n\r\nconst Input = styled.input`\r\n  padding: 6px;\r\n  border: solid 1px #423737;\r\n  color: #ffe6ab;\r\n  background: #261d1d;\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  width: 100%;\r\n`\r\n\r\nconst InputWrapper = styled.div`\r\n  margin: 20px 0 10px;\r\n`\r\n\r\nconst Seperator = styled.hr`\r\n  border: 0;\r\n  border-top: 1px solid #453a3a;\r\n`\r\n","import React, { useEffect, useRef } from \"react\" // eslint-disable-line no-unused-vars\r\n\r\nimport Button from \"../../components/Button\"\r\nimport GetLinkPopup from \"./GetLinkPopup\"\r\n\r\nconst GetLink = ({ link, onGetLink, onClose }) => {\r\n  const popupElm = useRef(null)\r\n\r\n  function handleClickAway(e) {\r\n    if (popupElm.current && !popupElm.current.contains(e.target)) onClose()\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"mousedown\", handleClickAway)\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickAway)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <Button onClick={onGetLink}>\r\n        <i className=\"fas fa-link\" />\r\n        &nbsp; Get Link\r\n      </Button>\r\n      {link && <GetLinkPopup link={link} ref={popupElm} />}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default GetLink\r\n","import React, { useContext, useState } from \"react\" // eslint-disable-line no-unused-vars\r\nimport styled from \"@emotion/styled\"\r\n\r\nimport { copyToClipboard } from \"../../helpers\"\r\nimport DataContext from \"../../DataContext\"\r\nimport OSSelect from \"./OSSelect\"\r\nimport GetLink from \"./GetLink\"\r\nimport { getLink } from \"../../helpers/api\"\r\n\r\nconst Controls = ({ icon, name }) => {\r\n  const { app, os, doSetOs } = useContext(DataContext)\r\n  const [publicLink, setPublicLink] = useState()\r\n\r\n  async function handleGetLink() {\r\n    const shortcutIds = app.shortcuts.filter(e => e.isPinned).map(e => e._id)\r\n    const link = await getLink(app._id, shortcutIds).then(data => data.text())\r\n    setPublicLink(link)\r\n    copyToClipboard(link)\r\n  }\r\n\r\n  function handleGetLinkClose() {\r\n    setPublicLink()\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <NameWrapper>\r\n        <Icon src={\"/logos/\" + icon} />\r\n        <Name>{name}</Name>\r\n      </NameWrapper>\r\n      <SearchWrapper />\r\n      <OSSelect onSelect={doSetOs} os={os} oss={app.oss} />\r\n      <Seperator />\r\n      <GetLink\r\n        onGetLink={handleGetLink}\r\n        onClose={handleGetLinkClose}\r\n        link={publicLink}\r\n      />\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Controls\r\n\r\nconst Seperator = styled.div`\r\n  height: 39px;\r\n  border-left: solid 1px #5a5a5a;\r\n  margin: 0 20px;\r\n`\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px;\r\n  margin: 60px 0 40px 0;\r\n  border-bottom: solid 1px #5a5a5a;\r\n  position: sticky;\r\n  top: 0;\r\n  background: linear-gradient(#3c1b1b, #371616) no-repeat;\r\n\r\n  @media (max-width: 768px) {\r\n    margin: 30px 0 20px 0;\r\n  }\r\n`\r\n\r\nconst NameWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n\r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n`\r\n\r\nconst Icon = styled.img`\r\n  width: 50px;\r\n  height: 50px;\r\n  transition: all 0.5s;\r\n\r\n  @media (max-width: 992px) {\r\n    width: 35px;\r\n    height: 35px;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    width: 25px;\r\n    height: 25px;\r\n    margin-bottom: 4px;\r\n  }\r\n`\r\n\r\nconst Name = styled.h1`\r\n  font-size: 40px;\r\n  margin-left: 20px;\r\n  font-weight: 200;\r\n  line-height: normal;\r\n\r\n  transition: all 0.5s;\r\n\r\n  @media (max-width: 992px) {\r\n    font-size: 25px;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 12px;\r\n    margin-left: 0;\r\n  }\r\n`\r\n\r\nconst SearchWrapper = styled.div`\r\n  position: relative;\r\n  margin-right: 20px;\r\n  margin-left: auto;\r\n`\r\n","import React, { useContext } from \"react\" // eslint-disable-line no-unused-vars\r\nimport DataContext from \"../DataContext\"\r\n\r\nimport styled from \"@emotion/styled\"\r\n\r\nimport ShortcutList from \"./app/ShortcutList\"\r\nimport Controls from \"./app/Controls\"\r\nimport { encodeAppName } from \"../helpers\"\r\n\r\nconst App = () => {\r\n  const { app, os } = useContext(DataContext)\r\n\r\n  const encodedName = encodeAppName(app.name)\r\n  return (\r\n    <div>      \r\n      <Controls icon={encodedName + \".png\"} name={app.name} />\r\n      <ResultsContainer>\r\n        {app.sections.map(section => {\r\n          const shortcuts = app.shortcuts.filter(\r\n            e => e.sectionId.toString() === section._id.toString() && e[os]\r\n          )\r\n\r\n          if (shortcuts.length === 0) return undefined\r\n\r\n          return (\r\n            <ShortcutList\r\n              key={section._id}\r\n              shortcuts={shortcuts}\r\n              title={section.name}\r\n            />\r\n          )\r\n        })}\r\n      </ResultsContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n\r\nconst ResultsContainer = styled.div`\r\n  columns: 2;\r\n  column-gap: 30px;\r\n\r\n  @media (max-width: 1122px) {\r\n    columns:1;\r\n  }\r\n`\r\n","import styled from \"@emotion/styled\"\r\n\r\nconst Input = styled.input`\r\n  padding: 6px;\r\n  border: solid 1px #423737;\r\n  color: #e9e5e5;\r\n  background: #261d1d;\r\n  border-radius: 5px;\r\n  width: 100%;\r\n`\r\n\r\nexport default Input\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\nimport { Link } from \"react-router-dom\"\r\n\r\nimport { Form } from \"react-powerplug\"\r\nimport * as EmailValidator from \"email-validator\"\r\n\r\nimport styled from \"@emotion/styled\"\r\n\r\nimport Input from \"../../components/Input\"\r\nimport Button from \"../../components/Button\"\r\n// export default \"\"\r\n\r\nexport default function Login({ onSubmit }) {\r\n  function handleSubmit(e, values, setValues) {\r\n    e.preventDefault()\r\n\r\n    const emailValid = EmailValidator.validate(values.email)\r\n    const passwordValid = values.password && values.password.length >= 6\r\n\r\n    setValues({ emailValid, passwordValid })\r\n\r\n    if (emailValid && passwordValid) {\r\n      onSubmit(values.email, values.password)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Form\r\n      initial={{\r\n        email: \"gabimor@gmail.com\",\r\n        password: \"123456\",\r\n        emailValid: true,\r\n        passwordValid: true,\r\n      }}\r\n    >\r\n      {({ field, values, setValues }) => {\r\n        return (\r\n          <FormContainer onSubmit={e => handleSubmit(e, values, setValues)}>\r\n            <Header>Log in</Header>\r\n            <Label>Email</Label>\r\n            <Input {...field(\"email\").bind} />\r\n            {!values.emailValid && <Error>Please enter a valid email</Error>}\r\n            <LabelWrapper>\r\n              <Label>Password</Label>\r\n              <a>Forgot password ?</a>\r\n            </LabelWrapper>\r\n            <Input {...field(\"password\").bind} />\r\n            {!values.passwordValid && (\r\n              <Error>Please enter your password</Error>\r\n            )}{\" \"}\r\n            <Button type=\"submit\" style={{ marginTop: 20 }}>\r\n              Log in\r\n            </Button>\r\n            <SignupWrapper>\r\n              Don't have an account ?<Link to=\"/signup\"> Sign up</Link>\r\n            </SignupWrapper>\r\n          </FormContainer>\r\n        )\r\n      }}\r\n    </Form>\r\n  )\r\n}\r\n\r\nconst FormContainer = styled.form`\r\n  display: flex;\r\n  flex-direction: column;\r\n`\r\n\r\nconst Header = styled.h2`\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n`\r\n\r\nconst LabelWrapper = styled.div`\r\n  display: flex;\r\n  align-items: baseline;\r\n  justify-content: space-between;\r\n  margin-top: 10px;\r\n  a {\r\n    font-size: 13px;\r\n  }\r\n`\r\n\r\nconst SignupWrapper = styled.div`\r\n  text-align: center;\r\n  margin-top: 40px;\r\n  color: #e9e5e5;\r\n`\r\n\r\nconst Label = styled.label`\r\n  color: #9d8b8b;\r\n  font-size: 14px;\r\n  margin-bottom: 5px;\r\n`\r\n\r\nconst Error = styled.label`\r\n  margin-top: 5px;\r\n  color: #e86562;\r\n  font-size: 14px;\r\n`\r\n","import React, { useContext } from \"react\" // eslint-disable-line no-unused-vars\r\nimport styled from \"@emotion/styled\"\r\n\r\nimport { login } from \"../helpers/api\"\r\nimport DataContext from \"../DataContext\"\r\nimport LoginForm from \"./login/LoginForm\"\r\n\r\nconst Login = () => {\r\n  const { doLogin } = useContext(DataContext)\r\n\r\n  async function handleSubmit(email, password) {\r\n    const userJson = await login(email, password)\r\n    doLogin(userJson)\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <LoginForm onSubmit={handleSubmit} />\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Login\r\n\r\nconst Container = styled.div`\r\n  width: 300px;\r\n  margin: 100px auto 0 auto;\r\n`\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\n\r\nimport styled from \"@emotion/styled\"\r\n\r\nexport default function Logo() {\r\n  return (\r\n    <H1>\r\n      keyboard\r\n      <span style={{ fontWeight: 700 }}>\r\n        ninja<Dot>.</Dot>\r\n        me\r\n      </span>\r\n      <Alpha> Alpha</Alpha>\r\n    </H1>\r\n  )\r\n}\r\n\r\nconst Alpha = styled.small`\r\n  font-size:10px;\r\n`\r\n\r\nconst H1 = styled.h1`\r\n  color: #ffffff;\r\n  font-size: 30px;\r\n  display: inline-block;\r\n  cursor: pointer;\r\n  font-weight: 300;\r\n  position: relative;\r\n\r\n  @media (max-width: 992px) {\r\n    font-size: 25px;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 20px;\r\n  }\r\n`\r\n\r\nconst Dot = styled.span`\r\n  color: #e86562;\r\n  font-size: 1.35em;\r\n`\r\n","import React, { useContext } from \"react\" // eslint-disable-line no-unused-vars\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"@emotion/styled\"\r\n\r\n// import { logout } from \"../../helpers/api\"\r\n// import DataContext from \"../../DataContext\"\r\nimport Logo from \"./Logo\"\r\n// import Nav from \"./Nav\"\r\n\r\nfunction Header() {\r\n  // const { user, doLogout } = useContext(DataContext)\r\n\r\n  // function handleLogout() {\r\n  //   logout()\r\n\r\n  //   doLogout()\r\n  // }\r\n\r\n  return (\r\n    <Container>\r\n      <Link to=\"/\">\r\n        <Logo />\r\n      </Link>\r\n      {/* <Nav user={user} onLogout={handleLogout} /> */}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Header\r\n\r\nconst Container = styled.header`\r\n  display: flex;\r\n  align-items: baseline;\r\n  padding-top: 10px;\r\n\r\n  @media (max-width: 992px) {\r\n    padding-top: 0;\r\n  }\r\n`\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\n\r\nimport styled from \"@emotion/styled\"\r\n\r\nexport default function Footer() {\r\n  return <Container />\r\n}\r\n\r\nconst Container = styled.footer`\r\n  height: 50px;\r\n`\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\nimport { Link } from \"react-router-dom\"\r\nimport { Form } from \"react-powerplug\"\r\nimport * as EmailValidator from \"email-validator\"\r\n\r\nimport styled from \"@emotion/styled\"\r\n\r\nimport Input from \"../../components/Input\"\r\nimport Button from \"../../components/Button\"\r\n\r\nexport default function Signup({ onSubmit }) {\r\n  function handleSubmit(e, values, setValues) {\r\n    e.preventDefault()\r\n\r\n    const emailValid = EmailValidator.validate(values.email)\r\n    const passwordValid =\r\n      values.password &&\r\n      values.password.length >= 6 &&\r\n      values.password.length <= 12\r\n\r\n    setValues({ emailValid, passwordValid })\r\n\r\n    if (emailValid && passwordValid) {\r\n      onSubmit(values.email, values.password)\r\n    }\r\n  }\r\n  const mockEmail = `a${Math.floor(Math.random() * Math.floor(1000000))}@b.com`\r\n\r\n  return (\r\n    <Form\r\n      initial={{\r\n        email: mockEmail,\r\n        password: \"123456\",\r\n        emailValid: true,\r\n        passwordValid: true,\r\n      }}\r\n    >\r\n      {({ field, values, setValues }) => {\r\n        return (\r\n          <FormContainer onSubmit={e => handleSubmit(e, values, setValues)}>\r\n            <Header>Sign up</Header>\r\n            <Label>Email</Label>\r\n            <Input {...field(\"email\").bind} />\r\n            {!values.emailValid && <Error>Please enter a valid email</Error>}\r\n            <LabelWrapper>\r\n              <Label>Password</Label>\r\n            </LabelWrapper>\r\n            <Input {...field(\"password\").bind} />\r\n            {!values.passwordValid && (\r\n              <Error>Please choose a password of 6-12 charecters</Error>\r\n            )}\r\n            <Button type=\"submit\" style={{ marginTop: 20 }}>\r\n              Sign up\r\n            </Button>\r\n            <SignupWrapper>\r\n              Already have an account ?<Link to=\"/login\"> Log in</Link>\r\n            </SignupWrapper>\r\n          </FormContainer>\r\n        )\r\n      }}\r\n    </Form>\r\n  )\r\n}\r\n\r\nconst FormContainer = styled.form`\r\n  display: flex;\r\n  flex-direction: column;\r\n`\r\n\r\nconst Header = styled.h2`\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n`\r\n\r\nconst LabelWrapper = styled.div`\r\n  display: flex;\r\n  align-items: baseline;\r\n  justify-content: space-between;\r\n  margin-top: 10px;\r\n  a {\r\n    font-size: 13px;\r\n  }\r\n`\r\n\r\nconst SignupWrapper = styled.div`\r\n  text-align: center;\r\n  margin-top: 40px;\r\n  color: #e9e5e5;\r\n`\r\n\r\nconst Label = styled.label`\r\n  color: #9d8b8b;\r\n  font-size: 14px;\r\n  margin-bottom: 5px;\r\n`\r\n\r\nconst Error = styled.label`\r\n  margin-top: 5px;\r\n  color: #e86562;\r\n  font-size: 14px;\r\n`\r\n","import React, { useContext } from \"react\" // eslint-disable-line no-unused-vars\r\nimport styled from \"@emotion/styled\"\r\n\r\nimport DataContext from \"../DataContext\"\r\nimport { signup } from \"../helpers/api\"\r\n\r\nimport SignupForm from \"./signup/SignupForm\"\r\n\r\nconst Signup = () => {\r\n  const { doLogin } = useContext(DataContext)\r\n\r\n  async function handleSubmit(email, password) {\r\n    const userJson = await signup(email, password)\r\n    doLogin(userJson)\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <SignupForm onSubmit={handleSubmit} />\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Signup\r\n\r\nconst Container = styled.div`\r\n  width: 300px;\r\n  margin: 100px auto 0 auto;\r\n`\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\nimport styled from \"@emotion/styled\"\r\n\r\nconst Page404 = () => {\r\n  return (\r\n    <Container>\r\n      <div>\r\n        <Header>\r\n          <Code>404 </Code>Oops...\r\n        </Header>\r\n        <Message>There's no one here</Message>\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Page404\r\n\r\nconst Header = styled.h1`\r\n  font-size: 40px;\r\n  color: #e86562;\r\n  margin: 100px 0 10px;\r\n`\r\n\r\nconst Message = styled.div`\r\n  margin-bottom: 10px;\r\n  font-size: 18px;\r\n  color: #e9e5e5;\r\n`\r\n\r\nconst Code = styled.span`\r\n  color: #fa9290;\r\n`\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\n","import React from \"react\" // eslint-disable-line no-unused-vars\r\nimport styled from \"@emotion/styled\"\r\nimport { Route, Switch } from \"react-router-dom\"\r\n\r\nimport Home from \"./pages/Home\"\r\nimport App from \"./pages/App\"\r\nimport Login from \"./pages/Login\"\r\nimport Header from \"./pages/layout/Header\"\r\nimport Footer from \"./pages/layout/Footer\"\r\nimport Signup from \"./pages/Signup\"\r\nimport Page404 from \"./pages/404\"\r\n\r\nconst Layout = () => {\r\n  return (\r\n    <div>\r\n      <Container>\r\n        <Header />\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Home} />\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <Route exact path=\"/signup\" component={Signup} />\r\n          <Route path=\"/404\" component={Page404} />\r\n          <Route path=\"/:name\" component={App} />\r\n          <Route component={Page404} />\r\n        </Switch>\r\n        <Footer />\r\n      </Container>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  max-width: 1440px;\r\n  margin: 0 auto;\r\n  padding: 0 30px;\r\n\r\n  @media (max-width: 992px) {\r\n    padding: 20px;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 10px;\r\n  }\r\n`\r\n\r\nexport default Layout\r\n","// /*\r\n//   #a12d2a - shortcuts titles\r\n//   #D1403D - darkRed\r\n//   #E86562 - red, links\r\n//   #fa9290 - links\r\n//   #5A5A5A - mutedIcon\r\n//   #9D8B8B - labelText, pinBorder\r\n//   #A4A3A6 - pin\r\n//   #d1b4b4 - textRed\r\n//   #d1d0d4 - soon text\r\n//   #E9E5E5 - softText\r\n\r\n//   #FFD46F - pinSelected\r\n//   #A57E26 - pinSelectedBorder\r\n\r\n//   #FFFFFF - white\r\n//   #4F4242 - appPanel\r\n//   #453A3A - darkBorder\r\n//   #442323 - mainBG1\r\n//   #270505 - mainBG2\r\n//   #2C2525 - panelZebra\r\n//   #2E2424 - panel\r\n//   #000000 - black\r\n// */\r\n\r\nexport const style = `<style>\r\n* {\r\n  box-sizing: border-box;\r\n}\r\nhtml {\r\n  height:100%;\r\n  background-color: #270505;\r\n}\r\n\r\nbody {\r\n  background: linear-gradient(#442323, #270505) no-repeat;    \r\n  background-size: 100% 400px;\r\n  color: #FFFFFF;\r\n  margin: 0;\r\n  font-family: \"IBM Plex Sans\", sans-serif;\r\n  font-size: 14px;\r\n  min-height: 500px;\r\n}\r\n\r\ninput, textarea, select, button {\r\n  font-family: inherit;\r\n  font-size: inherit;\r\n  border: none;\r\n  box-sizing: border-box;\r\n}\r\n\r\ninput:focus, textarea:focus, select:focus, div:focus, button:focus,\r\ninput:active, textarea:active, select:active, div:active, button:active {\r\n  outline: 0;\r\n}\r\n\r\ninput {\r\n  padding: 8px 10px 8px;\r\n  color: #FFFFFF;\r\n  background: #000000;\r\n}\r\n\r\nkbd {\r\n  display: inline-block;\r\n  background-color: #635656;\r\n  color: #FFFFFF;\r\n  font-family: inherit;\r\n\r\n  font-size: 13px;\r\n  border: solid 1px #442323;\r\n  border-radius: 6px;\r\n  padding: 0 2px;\r\n  min-width: 32px;\r\n  text-align: center;\r\n  box-shadow: 0px 6px 1px 1px rgba(30,30,30,0.2);\r\n}\r\n\r\nlabel {\r\n  margin-right: 6px;\r\n  color: #FFFFFF;\r\n}\r\n\r\nul, ul li, ol, ol li {\r\n  margin: 0;\r\n  padding: 0;\r\n  list-style-position: inside;\r\n}\r\n\r\n\r\nul, ul li {\r\n  list-style: none;\r\n}\r\n\r\na {\r\n  color: #fa9290;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n\r\nh1,h2,h3,h4,h5,h6 {\r\n  margin: 0;\r\n  line-height:1em;\r\n  font-weight: normal;\r\n}\r\n</style>`\r\n\r\nexport function page(markup, title, assets, data) {\r\n  let head = assets.client.css\r\n    ? `<link rel=\"stylesheet\" href=\"${assets.client.css}\">`\r\n    : \"\"\r\n  head +=\r\n    process.env.NODE_ENV === \"production\"\r\n      ? `<script src=\"${assets.client.js}\" defer></script>`\r\n      : `<script src=\"${assets.client.js}\" defer crossorigin></script>`\r\n\r\n  return `<!doctype html>\r\n    <html lang=\"\">\r\n    <head>\r\n      <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\r\n      <meta charset=\"utf-8\" />\r\n      <title>${title || \"Keyboard Ninja Me\"}</title>\r\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n      <link\r\n        href=\"https://use.fontawesome.com/releases/v5.4.2/css/all.css\"\r\n        integrity=\"sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns\"\r\n        crossOrigin=\"anonymous\"\r\n        rel=\"stylesheet\" />\r\n      <link\r\n        href=\"https://fonts.googleapis.com/css?family=IBM+Plex+Sans:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i\"\r\n        rel=\"stylesheet\" />\r\n\r\n      ${style}\r\n      ${head || \"\"}\r\n    </head>\r\n    <body>\r\n      <script>\r\n        window.__KBN_DATA__ = ${data ? JSON.stringify(data) : undefined};\r\n      </script>\r\n      <div id=\"root\">${markup}</div>\r\n    </body>\r\n    </html>`\r\n}\r\n\r\nexport function pageStart(title, assets, data) {\r\n  let head = assets.client.css\r\n    ? `<link rel=\"stylesheet\" href=\"${assets.client.css}\">`\r\n    : \"\"\r\n  head +=\r\n    process.env.NODE_ENV === \"production\"\r\n      ? `<script src=\"${assets.client.js}\" defer></script>`\r\n      : `<script src=\"${assets.client.js}\" defer crossorigin></script>`\r\n\r\n  return `<!doctype html>\r\n    <html lang=\"\">\r\n    <head>\r\n      <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\r\n      <meta charset=\"utf-8\" />\r\n      <title>${title || \"Keyboard Ninja Me\"}</title>\r\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n      <link\r\n        href=\"https://use.fontawesome.com/releases/v5.4.2/css/all.css\"\r\n        integrity=\"sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns\"\r\n        crossOrigin=\"anonymous\"\r\n        rel=\"stylesheet\" />\r\n      <link\r\n        href=\"https://fonts.googleapis.com/css?family=IBM+Plex+Sans:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i\"\r\n        rel=\"stylesheet\" />\r\n      ${style}\r\n      ${head || \"\"}\r\n    </head>\r\n    <body>\r\n      <script>\r\n        window.__KBN_DATA__ = ${data ? JSON.stringify(data) : undefined};\r\n      </script>\r\n      <div id=\"root\">`\r\n}\r\n\r\nexport function pageEnd() {\r\n  return \"</div></body></html>\"\r\n}\r\n// <!-- Hotjar Tracking Code for http://www.keyboardninja.me -->\r\n// <script>\r\n//     (function(h,o,t,j,a,r){\r\n//         h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};\r\n//         h._hjSettings={hjid:1186459,hjsv:6};\r\n//         a=o.getElementsByTagName('head')[0];\r\n//         r=o.createElement('script');r.async=1;\r\n//         r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;\r\n//         a.appendChild(r);\r\n//     })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');\r\n// </script>\r\n// <!-- Global site tag (gtag.js) - Google Analytics -->\r\n// <script async src=\"https://www.googletagmanager.com/gtag/js?id=UA-90675788-2\"></script>\r\n// <script>\r\n//   window.dataLayer = window.dataLayer || [];\r\n//   function gtag(){dataLayer.push(arguments);}\r\n//   gtag('js', new Date());\r\n\r\n//   gtag('config', 'UA-90675788-2');\r\n// </script>\r\n","import passport from \"passport\"\r\nimport { Strategy as LocalStrategy } from \"passport-local\"\r\n\r\nimport { User } from \"./models\"\r\n\r\npassport.use(\r\n  new LocalStrategy(\r\n    {\r\n      usernameField: \"email\",\r\n      passwordField: \"password\",\r\n    },\r\n    async function(username, password, done) {\r\n      try {\r\n        const user = await User.findOne({ email: username, password })\r\n        if (user) {\r\n          return done(null, user)\r\n        } else {\r\n          return done(null, false, { message: \"Incorrect email or password\" })\r\n        }\r\n      } catch (err) {\r\n        return done(err)\r\n      }\r\n    }\r\n  )\r\n)\r\n\r\n// serialize user object\r\npassport.serializeUser(function(user, done) {\r\n  done(null, { id: user.id, email: user.email })\r\n})\r\n\r\n// deserialize user object\r\npassport.deserializeUser(function(user, done) {\r\n  done(null, user)\r\n})\r\n","import mongoose from \"mongoose\"\r\nimport { User, UserShortcut } from \"./models\"\r\n\r\nmongoose.connect(\r\n  `mongodb+srv://gabimor:${\r\n    process.env.ATLAS_PASSWORD\r\n  }@cluster0-li1ur.mongodb.net/keyboard_ninja?retryWrites=true`,\r\n  {\r\n    useNewUrlParser: true,\r\n  }\r\n)\r\n\r\n// mongoose.set(\"debug\", true)\r\n\r\nexport async function setPin(userId, appId, shortcutId, isPinned) {\r\n  let update\r\n\r\n  if (isPinned) {\r\n    update = { $addToSet: { shortcuts: [shortcutId] } }\r\n  } else {\r\n    update = { $pull: { shortcuts: shortcutId } }\r\n  }\r\n\r\n  await UserShortcut.findOneAndUpdate({ userId, appId }, update, {\r\n    upsert: true,\r\n  })\r\n}\r\n\r\nexport async function signupUser(email, password) {\r\n  let user = await User.findOne({ email, password })\r\n\r\n  if (!user) {\r\n    user = new User({ email, password })\r\n    await user.save()\r\n  }\r\n\r\n  return user\r\n}\r\n","import passport from \"passport\"\r\nimport express from \"express\"\r\nimport { Types } from \"mongoose\"\r\n\r\nimport { UserShortcut } from \"./models\"\r\nimport * as db from \"./db\"\r\nimport * as cache from \"./cache\"\r\nimport md5 from \"md5\"\r\n\r\nconst router = express.Router()\r\n\r\nrouter.post(\"/signup\", async function(req, res, next) {\r\n  const { email, password } = req.body\r\n\r\n  await db.signupUser(email, password)\r\n  req.login({ email, password }, function(err) {\r\n    if (err) {\r\n      return next(err)\r\n    }\r\n    return res.json({ email })\r\n  })\r\n})\r\n\r\n// router.post(\r\n//   \"/login\",\r\n//   passport.authenticate(\"local\", {\r\n//     failureRedirect: \"/login\",\r\n//     failureFlash: true,\r\n//   }),\r\n//   (req, res, next) => {\r\n//     req.session.save(err => {\r\n//       if (err) {\r\n//         return next(err)\r\n//       }\r\n//       res.redirect(\"/\")\r\n//     })\r\n//   }\r\n// )\r\n\r\n// router.post(\r\n//   \"/login\",\r\n//   passport.authenticate(\"local\", {\r\n//     successRedirect: \"/\",\r\n//     failureRedirect: \"/login\",\r\n//   })\r\n// )\r\n\r\nrouter.post(\"/login\", function(req, res, next) {\r\n  // passport.authenticate(\r\n  //   \"local\",\r\n  //   {\r\n  //     successRedirect: \"/\",\r\n  //     failureRedirect: \"/login\",\r\n  //   },\r\n  //   function(req, res) {\r\n  //     // If this function gets called, authentication was successful.\r\n  //     // `req.user` contains the authenticated user.\r\n  //     res.redirect(\"/users/\" + req.user.username)\r\n  //   }\r\n  // )\r\n  passport.authenticate(\"local\", function(error, user, info) {\r\n    if (error) {\r\n      res.status(401).send(error)\r\n    } else if (!user) {\r\n      res.status(401).send(info)\r\n    } else {\r\n      req.login(user, function(err) {\r\n        if (err) {\r\n          return next(err)\r\n        }\r\n        return res.json({ email: user.email })\r\n      })\r\n    }\r\n  })(req, res)\r\n})\r\n\r\nrouter.post(\"/logout\", function(req, res) {\r\n  req.logout()\r\n  res.send()\r\n})\r\n\r\n// router.patch(\"/pin\", function(req, res) {\r\n//   const { appId, shortcutId, isPinned } = req.body\r\n\r\n//   // db.setPin(req.user.id, appId, shortcutId, isPinned)\r\n//   // cache.setPin(appId, shortcutId, isPinned)\r\n//   req.session.pins = req.session.pins || 0\r\n//   req.session.pins++\r\n\r\n//   res.status(200).send()\r\n// })\r\n\r\nrouter.post(\"/getlink\", async function(req, res) {\r\n  const appsHash = await cache.getAppsHash()\r\n  const { appId, shortcutIds } = req.body\r\n  const appName = appsHash.find(e => e.id.toString() === appId).name\r\n\r\n  let link = process.env.APP_URL + appName\r\n  console.log(link)\r\n  if (shortcutIds.length > 0) {\r\n    console.log(shortcutIds)\r\n    const hash = md5(req.sessionID + shortcutIds.join()).substring(8)\r\n    link += \"?h=\" + hash\r\n\r\n    console.log(hash)\r\n\r\n    const existingSave = await UserShortcut.findById(hash)\r\n\r\n    if (!existingSave) {\r\n      console.log(\"saving\")\r\n      const userShortcut = new UserShortcut({\r\n        _id: Types.ObjectId(hash),\r\n        appId,\r\n        shortcuts: shortcutIds,\r\n      })\r\n      userShortcut.save()\r\n    }\r\n  }\r\n\r\n  res.status(200).send(link)\r\n})\r\n\r\nexport default router\r\n","/* eslint-disable import/first */\r\nimport React from \"react\" // eslint-disable-line no-unused-vars\r\nimport { StaticRouter } from \"react-router-dom\"\r\nimport { renderToString, renderToNodeStream } from \"react-dom/server\"\r\nimport bodyParser from \"body-parser\"\r\nimport cookieParser from \"cookie-parser\"\r\nimport passport from \"passport\"\r\nimport flash from \"connect-flash\"\r\nimport session from \"express-session\"\r\nimport express from \"express\"\r\nimport compression from \"compression\"\r\nimport dotenv from \"dotenv\"\r\n\r\nconst RedisStore = require(\"connect-redis\")(session)\r\n\r\ndotenv.config()\r\n\r\nimport * as cache from \"./server/cache\"\r\nimport Layout from \"./client/Layout\"\r\nimport DataContext from \"./client/DataContext\"\r\nimport { page, pageStart, pageEnd } from \"./server/page\"\r\nimport \"./server/auth\"\r\nimport api from \"./server/api\"\r\nimport { UserShortcut } from \"./server/models\"\r\n\r\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST)\r\n\r\nconst app = express()\r\n\r\nconst router = express.Router()\r\n\r\napp.disable(\"x-powered-by\")\r\n\r\napp.use(\r\n  session({\r\n    store: new RedisStore(),\r\n    secret: process.env.SESSION_SECRET,\r\n    resave: false,\r\n    saveUninitialized: true,\r\n    cookie: { maxAge: 300000, secure: false },\r\n  })\r\n)\r\n\r\napp.use(compression())\r\napp.use(bodyParser.json())\r\napp.use(bodyParser.urlencoded({ extended: false }))\r\napp.use(cookieParser())\r\napp.use(passport.initialize())\r\napp.use(flash())\r\napp.use(passport.session())\r\napp.use(\"/api\", api)\r\napp.use(\"/\", router)\r\n\r\nconsole.log(process.env.RAZZLE_PUBLIC_DIR)\r\napp.use(express.static(process.env.RAZZLE_PUBLIC_DIR))\r\n\r\napp.get(\"/404\", defaultHandler)\r\n\r\napp.get(\"/:name\", async (req, res, next) => {\r\n  try {\r\n    const appsHash = await cache.getAppsHash()\r\n    const foundApp = appsHash.find(e => e.name === req.params.name)\r\n\r\n    if (!foundApp) return res.redirect(\"/404\")\r\n\r\n    const appId = foundApp.id\r\n\r\n    let app = await cache.getApp(appId)\r\n\r\n    let { os } = req.cookies\r\n    if (!os) {\r\n      os = req.headers[\"user-agent\"].toLowerCase().includes(\"win\")\r\n        ? \"win\"\r\n        : \"mac\"\r\n    }\r\n    // if app doesn't support the detected os, switch os to the one that's supported\r\n    if (!app.oss.includes(os)) {\r\n      os = app.oss[0]\r\n    }\r\n\r\n    if (req.query.h) {\r\n      try {\r\n        const userShortcuts = await UserShortcut.findById(req.query.h)\r\n\r\n        // TODO: replace with production solution\r\n        app = JSON.parse(JSON.stringify(app))\r\n\r\n        if (userShortcuts && userShortcuts.appId.toString() === appId) {\r\n          for (const shortcutId of userShortcuts.shortcuts) {\r\n            app.shortcuts.find(\r\n              e => e._id.toString() === shortcutId.toString()\r\n            ).isPinned = true\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.log(req.path)\r\n        console.log(error.toString())\r\n        // res.redirect(req.path)\r\n      }\r\n    }\r\n\r\n    // if (req.user) {\r\n    //   const userShortcuts = await UserShortcut.findOne({\r\n    //     userId: req.user.id,\r\n    //     appId: app._id,\r\n    //   })\r\n    //   if (userShortcuts) {\r\n    //     for (const shortcutId of userShortcuts.shortcuts) {\r\n    //       app.shortcuts.find(\r\n    //         e => e._id.toString() === shortcutId.toString()\r\n    //       ).isPinned = true\r\n    //     }\r\n    //   }\r\n    // }\r\n\r\n    const appCategories = await cache.getAppCategories()\r\n    const dataContext = { app, os, appCategories }\r\n\r\n    sendPage(req, res, dataContext)\r\n  } catch (err) {\r\n    next(err)\r\n  }\r\n})\r\n\r\napp.get(\"/\", defaultHandler)\r\n\r\nasync function defaultHandler(req, res, next) {\r\n  try {\r\n    const appCategories = await cache.getAppCategories()\r\n\r\n    const dataContext = {\r\n      appCategories,\r\n      user: req.user,\r\n    }\r\n\r\n    sendPage(req, res, dataContext)\r\n  } catch (err) {\r\n    next(err)\r\n  }\r\n}\r\n\r\napp.use(function errorHandler(err, req, res, next) {\r\n  res.status(500)\r\n  res.send(err.toString() + err.stack)\r\n})\r\n\r\nconst getTemplate = (url, dataContext) => (\r\n  <DataContext.Provider value={dataContext}>\r\n    <StaticRouter context={{}} location={url}>\r\n      <Layout />\r\n    </StaticRouter>\r\n  </DataContext.Provider>\r\n)\r\n\r\nconst sendPage = (req, res, dataContext) => {\r\n  const cacheKey = req.originalUrl + \"-\" + dataContext.os\r\n\r\n  if (!req.user) {\r\n    let cachePage = cache.get(cacheKey)\r\n    if (!cachePage) {\r\n      const markup = renderToString(getTemplate(req.url, dataContext))\r\n      cachePage = page(markup, undefined, assets, dataContext)\r\n      cache.set(cacheKey, cachePage)\r\n    }\r\n    res.status(200).send(cachePage)\r\n  } else {\r\n    res.write(pageStart(undefined, assets, dataContext))\r\n    const stream = renderToNodeStream(getTemplate(req.url, dataContext))\r\n    stream.pipe(\r\n      res,\r\n      { end: \"false\" }\r\n    )\r\n    stream.on(\"end\", () => {\r\n      res.end(pageEnd())\r\n    })\r\n  }\r\n}\r\n\r\nexport default app\r\n"],"sourceRoot":""}